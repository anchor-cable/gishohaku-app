const cheerio = require('cheerio')
const immer = require("immer")

const $ = cheerio.load(`<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" class="next-head"/><meta charSet="utf-8" class="next-head"/><title class="next-head">Next Firebase App</title><link rel="preload" href="/_next/static/XN5XBnF3hvLWTh41iWlpL/pages/books/_id.js" as="script"/><link rel="preload" href="/_next/static/XN5XBnF3hvLWTh41iWlpL/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-a79426b5e11f0ba5879d.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.c4736c0dc85775427e48.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-b0a6bf19fd2147d57503.js" as="script"/></head><body><div id="__next"><style data-emotion-css="r0b1xh">body{padding:0;margin:0;}</style><style data-emotion-css="jg1t6t">.css-jg1t6t{min-height:56px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:1rem;padding-right:1rem;}@media (min-width:768px){.css-jg1t6t{min-height:64px;padding-left:1.5rem;padding-right:1.5rem;}}</style><div style="background-color:rgb(52, 58, 64);justify-content:center" class="css-jg1t6t"><style data-emotion-css="1d51re1">.css-1d51re1{-webkit-text-decoration:none;text-decoration:none;background:none;-webkit-appearance:none;box-sizing:border-box;text-align:center;-webkit-font-smoothing:antialiased;border:none;outline:none;text-rendering:optimizeLegibility;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;cursor:pointer;box-shadow:none;font-weight:500;position:relative;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";border-radius:0.25rem;font-size:1rem;padding:0 1rem;height:40px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background:transparent;box-shadow:none;color:rgba(255,255,255,0.7);opacity:1;background:transparent;box-shadow:none;-webkit-transition:box-shadow 0.07s cubic-bezier(0.35,0,0.25,1),background 0.07s cubic-bezier(0.35,0,0.25,1),opacity 0.35s cubic-bezier(0.35,0,0.25,1);transition:box-shadow 0.07s cubic-bezier(0.35,0,0.25,1),background 0.07s cubic-bezier(0.35,0,0.25,1),opacity 0.35s cubic-bezier(0.35,0,0.25,1);}.css-1d51re1:active{opacity:0.4;}@media (hover:hover){.css-1d51re1:hover{background:hsla(0,0%,100%,0.07);}.css-1d51re1:focus{z-index:2;box-shadow:0 0 0 3px hsla(0,0%,100%,0.15);}.css-1d51re1:active,.css-1d51re1[aria-expanded="true"]{background:hsla(0,0%,100%,0.15);box-shadow:none;opacity:1;}}</style><button class="css-1d51re1"><style data-emotion-css="1kd7cij">.css-1kd7cij{-webkit-flex:1;-ms-flex:1;flex:1;margin-right:0;margin-left:0;}</style><span aria-hidden="false" class="css-1kd7cij">Demo Blog with WP REST API</span></button></div><style data-emotion-css="fb4n88">.css-fb4n88{background-color:rgb(52,58,64);}</style><div class="Tabs css-fb4n88"><style data-emotion-css="1o8dm9j">.css-1o8dm9j{width:100%;white-space:nowrap;overflow-x:scroll;-webkit-overflow-scrolling:touch;max-width:1200px;margin:0 auto;-webkit-scrollbar-width:none;-moz-scrollbar-width:none;-ms-scrollbar-width:none;scrollbar-width:none;-ms-overflow-style:none;}.css-1o8dm9j::-webkit-scrollbar{height:0;width:0;}</style><div class="Tabs__container css-1o8dm9j"><style data-emotion-css="1fi2h5t">.css-1fi2h5t{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;vertical-align:bottom;}.css-1fi2h5t button{-webkit-flex:1;-ms-flex:1;flex:1;}</style><div class="Tabs__tablist css-1fi2h5t" role="tablist"><style data-emotion-css="1q5h4vd">.css-1q5h4vd{-webkit-text-decoration:none;text-decoration:none;background:none;-webkit-appearance:none;box-sizing:border-box;text-align:center;-webkit-font-smoothing:antialiased;border:none;outline:none;text-rendering:optimizeLegibility;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;cursor:pointer;box-shadow:none;padding:10px 1rem;cursor:pointer;color:rgba(255,255,255,1);}@media (min-width:992px){.css-1q5h4vd{padding:10px 1.5rem;}}.css-1q5h4vd span{-webkit-transition:color 0.25s cubic-bezier(0.35,0,0.25,1);transition:color 0.25s cubic-bezier(0.35,0,0.25,1);}.css-1q5h4vd svg{-webkit-transition:stroke 0.35s cubic-bezier(0.35,0,0.25,1);transition:stroke 0.35s cubic-bezier(0.35,0,0.25,1);stroke:rgba(255,255,255,1) !important;}.css-1q5h4vd:focus{color:white;}.css-1q5h4vd:active{color:rgba(255,255,255,0.4);}.css-1q5h4vd:active svg{stroke:rgba(255,255,255,0.3) !important;}</style><button role="tab" id="all-tab" aria-controls="all" aria-selected="true" tabindex="0" class="css-1q5h4vd"><style data-emotion-css="4p4tnn">.css-4p4tnn{font-size:0.875rem;font-weight:600;color:inherit;-webkit-transition:color 0.25s cubic-bezier(0.35,0,0.25,1);transition:color 0.25s cubic-bezier(0.35,0,0.25,1);}</style><style data-emotion-css="100fcxs">.css-100fcxs{box-sizing:border-box;margin:0;font-weight:400;line-height:1.5;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;color:rgba(255,255,255,0.88);-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.875rem;font-weight:400;color:rgba(255,255,255,0.7);line-height:1.5;font-size:0.875rem;font-weight:600;color:inherit;-webkit-transition:color 0.25s cubic-bezier(0.35,0,0.25,1);transition:color 0.25s cubic-bezier(0.35,0,0.25,1);}</style><span class="css-100fcxs">All</span></button><style data-emotion-css="1vt9wdn">.css-1vt9wdn{-webkit-text-decoration:none;text-decoration:none;background:none;-webkit-appearance:none;box-sizing:border-box;text-align:center;-webkit-font-smoothing:antialiased;border:none;outline:none;text-rendering:optimizeLegibility;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;cursor:pointer;box-shadow:none;padding:10px 1rem;cursor:pointer;color:rgba(255,255,255,0.65);}@media (min-width:992px){.css-1vt9wdn{padding:10px 1.5rem;}}.css-1vt9wdn span{-webkit-transition:color 0.25s cubic-bezier(0.35,0,0.25,1);transition:color 0.25s cubic-bezier(0.35,0,0.25,1);}.css-1vt9wdn svg{-webkit-transition:stroke 0.35s cubic-bezier(0.35,0,0.25,1);transition:stroke 0.35s cubic-bezier(0.35,0,0.25,1);stroke:rgba(255,255,255,0.65) !important;}.css-1vt9wdn:focus{color:white;}.css-1vt9wdn:active{color:rgba(255,255,255,0.4);}.css-1vt9wdn:active svg{stroke:rgba(255,255,255,0.3) !important;}</style><button role="tab" id="develop-tab" aria-controls="develop" aria-selected="false" tabindex="-1" class="css-1vt9wdn"><span class="css-100fcxs">Develop</span></button><button role="tab" id="design-tab" aria-controls="design" aria-selected="false" tabindex="-1" class="css-1vt9wdn"><span class="css-100fcxs">Design</span></button><button role="tab" id="event-tab" aria-controls="event" aria-selected="false" tabindex="-1" class="css-1vt9wdn"><span class="css-100fcxs">Event</span></button></div></div></div><div><style data-emotion-css="1245l49">.css-1245l49{width:100%;max-width:1200px;box-sizing:border-box;margin:0 auto;padding:0 1rem;}@media (min-width:992px){.css-1245l49{padding:0 1.5rem;}}</style><div class="css-1245l49"><style data-emotion-css="zg29cy">.css-zg29cy{max-width:720px;margin:0 auto;}.css-zg29cy h2{font-size:28px;margin-top:48px;margin-bottom:24px;font-weight:600;}.css-zg29cy h3{font-size:20px;margin:32px 0 24px;font-weight:600;}.css-zg29cy h4{font-weight:600;}.css-zg29cy h2 + h3{margin-top:0;}.css-zg29cy img{max-width:100%;}.css-zg29cy ul,.css-zg29cy ol{padding-left:24px;}.css-zg29cy li{margin:10px 0;}.css-zg29cy ul > li{list-style-type:disc;}.css-zg29cy li > p{margin:0;}.css-zg29cy table{border:1px solid rgba(0,0,0,0.1);width:100%;border-collapse:collapse;border-spacing:0;margin:20px 0;margin-bottom:30px;}.css-zg29cy table tr:nth-child(odd) td{background-color:#f9f9f9;}.css-zg29cy table tr th,.css-zg29cy table tr td{padding:8px;line-height:1.6;vertical-align:top;border:1px solid rgba(0,0,0,0.1);}.css-zg29cy table tr th{white-space:nowrap;}.css-zg29cy input[type='text']{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;background-image:none;border:1px solid rgba(0,0,0,0.16);border-radius:0;color:inherit;font-family:inherit;font-size:1em;padding:0.4em 0.8em;width:100%;}.css-zg29cy select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent url(/images/icon-down.svg) no-repeat center right 8px/16px 16px;border:1px solid rgba(0,0,0,0.16);border-radius:0;color:inherit;cursor:pointer;font-family:inherit;font-size:1em;padding:0.4em 0.8em;width:100%;}</style><div class="css-zg29cy e1prpec10"><h1 id="book-title">aaaaa</h1><div id="book-description">bbbbbbbbb</div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{"book":{"id":"1","title":"aaaaa","description":"bbbbbbbbb"}}},"page":"/books/_id","query":{},"buildId":"XN5XBnF3hvLWTh41iWlpL","dynamicBuildId":false,"nextExport":true}</script><script async="" id="__NEXT_PAGE__/books/_id" src="/_next/static/XN5XBnF3hvLWTh41iWlpL/pages/books/_id.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/_next/static/XN5XBnF3hvLWTh41iWlpL/pages/_app.js"></script><script src="/_next/static/runtime/webpack-a79426b5e11f0ba5879d.js" async=""></script><script src="/_next/static/chunks/commons.c4736c0dc85775427e48.js" async=""></script><script src="/_next/static/runtime/main-b0a6bf19fd2147d57503.js" async=""></script></body></html>`)

$('#book-title').text('本のタイトル')
$('#book-description').text('本のタイトル')
const data = JSON.parse($('#__NEXT_DATA__').html())

// console.log(immer.produce)

const nextData = immer.produce(data, draftData => {
  draftData.props.pageProps.book = {
    title: '本のタイトル',
    description: 'さらば碧き面影'
  }
})


// const nextData = {
//   ...data,
//   props: {
//     ...data.props,
//     pageProps: {
//       ...data.props.pageProps,
//       book: {
//         title: '本のタイトル',
//         description: 'さらば碧き面影'
//       }
//     }
//   }
// };

console.log(nextData)

$('#__NEXT_DATA__').html(JSON.stringify(nextData));

// console.log(data)

console.log($.html())